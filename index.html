<!DOCTYPE html>
<html lang="zh_CN" style="background:none;">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<!-- å…³é”®å…¼å®¹å£°æ˜ -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>æ°‘ç”Ÿé•¿æ²™æƒç›Šå…‘æ¢</title>
<style>
/* åŸæœ‰æ ·å¼ä¿ç•™ */
body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f5f5f5; margin: 0; }
.container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 90%; max-width: 500px; }
input[type="url"] { width: 100%; padding: 12px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; margin-bottom: 15px; }
input:invalid { border-color: #ff6b6b; }
button { background-color: #4CAF50; color: white; border: none; padding: 12px 20px; font-size: 16px; border-radius: 4px; cursor: pointer; width: 100%; transition: background-color 0.3s; }
button:hover { background-color: #45a049; }
.error { color: #ff6b6b; margin-top: 8px; display: none; }
/* æ–°å¢ç§»åŠ¨ç«¯æç¤º */
#deviceTip { display: none; margin-top: 15px; padding: 12px; background: #fff8e1; border-radius: 4px; color: #e65100; }
</style>
</head>
<body>
<div class="container">
    <h2>ç½‘å€è·³è½¬å·¥å…·</h2>
    <form id="urlForm">
        <input type="url" id="urlInput" 
               placeholder="è¾“å…¥å®Œæ•´ç½‘å€ï¼ˆå¦‚ï¼šhttps://www.cmbc.com.cnï¼‰" 
               required>
        <div id="errorMsg" class="error">è¯·è¾“å…¥æœ‰æ•ˆçš„ç½‘å€ï¼ˆéœ€åŒ…å«åè®®å¦‚http://ï¼‰</div>
        <button type="submit">è·³è½¬åˆ°ç½‘å€</button>
    </form>
    <!-- è®¾å¤‡æç¤ºåŒºåŸŸ -->
    <div id="deviceTip"></div>
</div>

<script>
// è®¾å¤‡æ£€æµ‹å‡½æ•°
function isIOS() { return /iPhone|iPad|iPod/i.test(navigator.userAgent); }
function isAndroid() { return /Android/i.test(navigator.userAgent); }

const form = document.getElementById('urlForm');
const urlInput = document.getElementById('urlInput');
const errorMsg = document.getElementById('errorMsg');
const deviceTip = document.getElementById('deviceTip');

// æ˜¾ç¤ºè®¾å¤‡æç¤ºï¼ˆç§»åŠ¨è®¾å¤‡ä¸“ç”¨ï¼‰
if (isIOS() || isAndroid()) {
    deviceTip.style.display = 'block';
    deviceTip.innerHTML = isIOS() ? 
        'ğŸ è‹¹æœè®¾å¤‡æç¤ºï¼šç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç›´æ¥è·³è½¬' : 
        'ğŸ¤– å®‰å“è®¾å¤‡ï¼šæ­£åœ¨å¯ç”¨å®‰å…¨è·³è½¬åè®®';
}

// è¡¨å•æäº¤å¤„ç†ï¼ˆå…¨å¹³å°å…¼å®¹ï¼‰
form.addEventListener('submit', function(event) {
    event.preventDefault();
    
    if (!urlInput.checkValidity()) {
        errorMsg.textContent = urlInput.validationMessage || 'è¯·è¾“å…¥æœ‰æ•ˆç½‘å€';
        errorMsg.style.display = 'block';
        return;
    }
    
    let url = urlInput.value.trim();
    if (!/^https?:\/\//i.test(url)) url = 'https://' + url;
    
    // ç‰¹æ®Šè®¾å¤‡å¤„ç†
    if (isIOS()) {
        // iOSæ–¹æ¡ˆï¼šåˆ›å»ºéšè—iframeè§¦å‘è·³è½¬[1,3](@ref)
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = url;
        document.body.appendChild(iframe);
        setTimeout(() => { iframe.remove(); }, 3000);
    } else {
        // é€šç”¨è·³è½¬æ–¹æ¡ˆï¼ˆå«Androidï¼‰
        window.location.href = url;
    }
});

// å¤‡ç”¨è·³è½¬æ–¹æ¡ˆï¼ˆé˜²æ­¢iOSæ‹¦æˆªï¼‰
function fallbackRedirect(url) {
    deviceTip.innerHTML = `è·³è½¬è¢«æ‹¦æˆªï¼Œè¯·<a href=" " style="color:#d32f2f;text-decoration:underline">æ‰‹åŠ¨ç‚¹å‡»æ­¤å¤„</a >`;
    deviceTip.style.display = 'block';
}

// ç›‘å¬è·³è½¬å¤±è´¥äº‹ä»¶
window.addEventListener('error', (e) => {
    if (e.message.includes('Blocked attempt')) {
        const url = urlInput.value;
        if (url) fallbackRedirect(url);
    }
});
</script>
</body>
</html>